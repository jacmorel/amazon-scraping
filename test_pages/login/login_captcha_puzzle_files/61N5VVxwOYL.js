(function(A){var e=window.AmazonUIPageJS||window.P,p=e._namespace||e.attributeErrors,B=p?p("MAPWebAssets",""):e;B.guardFatal?B.guardFatal(A)(B,window):B.execute(function(){A(B,window)})})(function(A,e,p){function B(e,p){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!==typeof p&&"function"!==typeof p?e:p}function K(e,p){if("function"!==typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);
e.prototype=Object.create(p&&p.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});p&&(Object.setPrototypeOf?Object.setPrototypeOf(e,p):e.__proto__=p)}function D(e,p){if(!(e instanceof p))throw new TypeError("Cannot call a class as a function");}var H="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function C(a){var c=
u[a];if(c!==p)return c.exports;c=u[a]={exports:{}};z[a](c,c.exports,C);return c.exports}var z={5276:function(a,c,b){function g(b,a){var d=Object.keys(b);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(b);a&&(c=c.filter(function(a){return Object.getOwnPropertyDescriptor(b,a).enumerable}));d.push.apply(d,c)}return d}function k(b){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{};a%2?g(Object(c),!0).forEach(function(a){(0,d.default)(b,a,c[a])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(b,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(a){Object.defineProperty(b,a,Object.getOwnPropertyDescriptor(c,a))})}return b}function h(a){var b=e();return function(){var d=(0,f.default)(a);if(b){var c=(0,f.default)(this).constructor;d=Reflect.construct(d,arguments,c)}else d=d.apply(this,arguments);return(0,m.default)(this,d)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;
try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}var n=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c.KatalMetricsDriverSushi=void 0;var q=n(b(2143)),r=n(b(4626)),m=n(b(1803)),f=n(b(6368)),l=n(b(7296)),y=n(b(2E3)),d=n(b(1514));a=n(b(6744));var w=n(b(421)),v=n(b(8119)),L={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"};b=function(){function a(){(0,l.default)(this,a);(0,d.default)(this,
"context",{})}(0,y.default)(a,[{key:"withSushiClient",value:function(a){console.log("withSushi client...");this.context.sushiClient=a;return this}},{key:"withDomainRealm",value:function(a,b){this.context.domain=a;this.context.realm=b;return this}},{key:"withCustomProducer",value:function(a){this.context.sushiProducer=a;return this}},{key:"withCustomSourceGroup",value:function(a){this.context.sourceGroupId=a;return this}},{key:"withErrorHandler",value:function(a){this.context.errorHandler=a;return this}},
{key:"withSushiClientOptions",value:function(a){this.context.sushiClientOptions=a;return this}},{key:"withSushiClientTransportOverride",value:function(a){this.context.sushiClientTransportOverride=a;return this}},{key:"build",value:function(){return new x(this.context)}}]);return a}();var x=function(a){function b(a){(0,l.default)(this,b);var f=c.call(this);(0,d.default)((0,q.default)(f),"sushi",void 0);(0,d.default)((0,q.default)(f),"producerId",void 0);(0,d.default)((0,q.default)(f),"sourceGroupId",
void 0);(0,d.default)((0,q.default)(f),"errorHandler",void 0);(0,d.default)((0,q.default)(f),"combinedErrorHandler",function(a){if(f.errorHandler)try{f.errorHandler(a);return}catch(T){console.error("Error handling error publishing metrics:"),console.error(T)}f.defaultErrorHandler(a)});var w=a.domain,m=a.realm,v=a.errorHandler,y=a.sushiProducer;y=void 0===y?"katal":y;var g=a.sushiClientOptions,k=a.sushiClientTransportOverride,h=a.sourceGroupId||L[w]||L.test;f.sushi=a.sushiClient||f.buildSushiClient(w,
m,h,g,k);f.errorHandler=v;f.producerId=y;f.sourceGroupId=h;return f}(0,r.default)(b,a);var c=h(b);(0,y.default)(b,[{key:"beforeUnload",value:function(a){this.sushi.onSushiUnload(a)}},{key:"defaultErrorHandler",value:function(a){console.error("Error publishing metrics:");console.error(a)}},{key:"withErrorHandling",value:function(a){try{return a()}catch(S){this.combinedErrorHandler(S)}}},{key:"buildSushiClient",value:function(a,d,c,f,l){if(!a||!d)throw Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");
return new v.default(b.getRealmName(d),c,this.combinedErrorHandler,f,l)}},{key:"publish",value:function(a,b,d){var c=this,f=3>arguments.length?arguments[1]:arguments[2];this.withErrorHandling(function(){if(w.default.List===a.type)a.metricList.forEach(function(a){c.publish(a,f)});else{var b=c.mapObjectTypeToNexusSchema(a.type),d=k(k({},f.context),{},{metricKey:a.name,value:a.value});a.isMonitor&&(d.isMonitor=!0);c.sushi.reset();c.sushi.event(d,c.producerId,b,{ssd:1})}})}},{key:"mapObjectTypeToNexusSchema",
value:function(a){switch(a){case w.default.String:return"katal.client.metrics.String.2";case w.default.Counter:return"katal.client.metrics.Counter.3";case w.default.Timer:return"katal.client.metrics.Timer.2";default:throw Error("Unknown type ".concat(a," when publishing metric object."));}}}],[{key:"getRealmName",value:function(a){switch(a){case "NAAmazon":case "USAmazon":return v.default.REGIONS.NA;case "EUAmazon":return v.default.REGIONS.EU;case "FEAmazon":case "JPAmazon":return v.default.REGIONS.FE;
case "CNAmazon":return v.default.REGIONS.CN;default:return a}}}]);return b}(a.default);c.KatalMetricsDriverSushi=x;(0,d.default)(x,"Builder",b)},2798:function(a,c,b){c.Z=void 0;b(6470);a=b(5276).KatalMetricsDriverSushi;c.Z=a},817:function(a,c,b){function g(a,b){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);b&&(c=c.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));d.push.apply(d,c)}return d}function k(a){for(var b=1;b<arguments.length;b++){var d=
null!=arguments[b]?arguments[b]:{};b%2?g(Object(d),!0).forEach(function(b){(0,n.default)(a,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):g(Object(d)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(d,b))})}return a}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(7296)),t=a(b(2E3)),n=a(b(1514)),q=a(b(7015)),r=a(b(949)),m=a(b(8786)),f=b(7552),l=b(4650),y=["site","serviceName",
"methodName"],d=["actionId"],w=function(){function a(){var b=0<arguments.length&&arguments[0]!==p?arguments[0]:{};(0,h.default)(this,a);this.context=k({},b)}(0,t.default)(a,[{key:"merge",value:function(b){if(!b)return this;if(b instanceof a.Builder)throw Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");b=b instanceof a?b.context:b;b=k(k(k({},this.context),b),{},{relatedMetrics:(0,f.mergeLists)(this.context.relatedMetrics,b.relatedMetrics),
relatedMetricsSingleAction:(0,f.mergeLists)(this.context.relatedMetricsSingleAction,b.relatedMetricsSingleAction),cloudWatchDimensions:(0,f.mergeLists)(this.context.cloudWatchDimensions,b.cloudWatchDimensions)});return new a(b)}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new a(k(k({},this.context),{},{relatedMetricsSingleAction:p}))}},{key:"driverContext",value:function(){var b=k({},this.context);delete b.relatedMetrics;delete b.relatedMetricsSingleAction;delete b.requestId;
this.context.requestId&&(b.actionId=(0,l.embedRequestId)(b.actionId,this.context.requestId));return new a(b)}},{key:"getFields",value:function(){return k({},this.context)}},{key:"validationError",value:function(){var a=this,b;if(b=(0,m.default)(y,function(b){if(a.context[b]==p)return Error("Field ".concat(b," is required, but it is ").concat(a.context[b]))}))return b;d.forEach(function(b){if(!a.context[b]){var d=new CustomEvent("katal.metrics.missing-".concat(b),{detail:{context:a.context}});null===
e||void 0===e?void 0:e.dispatchEvent(d);console.warn("No ".concat(b," present in context."))}});return(0,m.default)(Object.keys(this.context),function(b){return a.validateField(b)})}},{key:"validateField",value:function(a){var b=this.context[a],d="field ".concat(a);switch(a){case "site":case "serviceName":if(-1<b.indexOf("/"))return Error("Expected ".concat(d," to contain only valid characters, but it was ").concat(b,".  It cannot contain a slash."));case "methodName":case "actionId":return(0,q.default)(b,
d);case "cloudWatchDimensions":return(0,r.default)(b||[])}}}]);return a}();c["default"]=w;(0,n.default)(w,"Builder",function(){function a(){(0,h.default)(this,a);(0,n.default)(this,"context",{})}(0,t.default)(a,[{key:"withSite",value:function(a){this.context.site=a;return this}},{key:"withServiceName",value:function(a){this.context.serviceName=a;return this}},{key:"withMethodName",value:function(a){this.context.methodName=a;return this}},{key:"withActionId",value:function(a){this.context.actionId=
a;return this}},{key:"withRequestId",value:function(a){this.context.requestId=a;return this}},{key:"withCloudWatchDimensions",value:function(a){this.context.cloudWatchDimensions=a;return this}},{key:"withRelatedMetrics",value:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];this.context.relatedMetrics=b;return this}},{key:"addRelatedMetrics",value:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];this.context.relatedMetrics=(0,f.mergeLists)(this.context.relatedMetrics,
b);return this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];this.context.relatedMetricsSingleAction=b;return this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];this.context.relatedMetricsSingleAction=(0,f.mergeLists)(this.context.relatedMetricsSingleAction,b);return this}},{key:"build",value:function(){return new w(this.context)}}]);return a}())},
5406:function(a,c,b){a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var g=a(b(7296)),k=a(b(2E3)),h=a(b(1514)),e=a(b(1246)),n=a(b(817)),q=b(767),r=b(7552),m=b(9739),f=b(4650),l=function(a){console.error("Error publishing metrics:");console.error(a)};b=function(){function a(b){var d=this,c=1<arguments.length&&arguments[1]!==p?arguments[1]:l,f=2<arguments.length&&arguments[2]!==p?arguments[2]:new n.default;(0,g.default)(this,a);(0,h.default)(this,"combinedErrorHandler",
function(a){try{d.errorHandler(a)}catch(P){console.error("Error handling error publishing metrics:"),console.error(P),l(a)}});if(f instanceof n.default.Builder)throw Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=b;this.errorHandler=c;this.context=f instanceof n.default?f:new n.default(f)}(0,k.default)(a,[{key:"withErrorHandling",value:function(a){try{return a()}catch(w){this.combinedErrorHandler(w)}}},{key:"getAdditionalRelatedMetrics",
value:function(a){a=a instanceof n.default?a.context:a;var b=this.getBaseRelatedMetrics();return(0,r.mergeLists)(b,a.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,r.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},{key:"publish",value:function(a){var b=this;this.withErrorHandling(function(){if(!a)throw Error("Cannot publish undefined/null metric object");if(q.Object.Types.List===a.type)a.metricList.forEach(function(a){b.publish(a)});
else{var d=b.context.driverContext(),c=d.validationError();if(c)throw c;if(c=a.validationError())throw c;(0,m.dispatchMetricEvent)(a,d);b.driver.publish(a,d)}})}},{key:"newChildPublisher",value:function(b){return new a(this.driver,this.errorHandler,this.context.merge(b))}},{key:"newChildActionPublisher",value:function(b){var d=this._generateActionid(b);d=this.context.withoutRelatedMetricsSingleAction().merge({actionId:d}).merge(b);var c=new a(this.driver,this.errorHandler,d);(b=!b||b instanceof n.default.Builder?
this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(b))&&b.forEach(function(a){c.publish(a)});return c}},{key:"newChildActionPublisherChained",value:function(a){var b=this._generateActionid(a),d=(0,f.embedRequestId)(b,this.context.context.requestId);d=[new q.String("parentActionId",d)];a=(new n.default({actionId:b,relatedMetricsSingleAction:d})).merge(a);return this.newChildActionPublisher(a)}},{key:"newChildActionPublisherChainedForMethod",value:function(a,b){return this.newChildActionPublisherChained((new n.default({methodName:a})).merge(b))}},
{key:"newChildActionPublisherForMethod",value:function(a,b){return this.newChildActionPublisher((new n.default({methodName:a})).merge(b))}},{key:"newChildActionPublisherForInitialization",value:function(a){return this.newChildActionPublisherForMethod("Initialization",a)}},{key:"publishString",value:function(a,b){this.publish(new q.String(a,b))}},{key:"publishStringTruncate",value:function(a,b){a=new q.String(a,b);a.truncate=!0;this.publish(a)}},{key:"publishCounter",value:function(a,b){this.publish(new q.Counter(a,
b))}},{key:"publishTimer",value:function(a,b){this.publish(new q.Timer(a,b))}},{key:"publishCounterMonitor",value:function(a,b){this.publish((new q.Counter(a,b)).withMonitor())}},{key:"publishTimerMonitor",value:function(a,b){this.publish((new q.Timer(a,b)).withMonitor())}},{key:"_generateActionid",value:function(a){return a&&(a=a.context?a.context:a,a.actionId)?a.actionId:(0,e.default)()}}]);return a}();c["default"]=b},6543:function(a,c){Object.defineProperty(c,"__esModule",{value:!0});c.DEFAULT_ERROR_HANDLER=
void 0;c.DEFAULT_ERROR_HANDLER=function(a){throw a;}},6744:function(a,c,b){a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var g=a(b(7296)),k=a(b(2E3));b=function(){function a(){(0,g.default)(this,a)}(0,k.default)(a,[{key:"publish",value:function(a,b){throw Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead");}}]);return a}();c["default"]=b},8786:function(a,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,
c){var b=p;a.some(function(a){b=c(a);return null!=b});return b}},2859:function(a,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;c["default"]=Object.values?Object.values:function(a){return Object.keys(a).map(function(b){return a[b]})}},3027:function(a,c,b){a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,b){if("number"!==typeof a)return Error("Expected ".concat(b," to have type 'number', but it was type '").concat((0,g.default)(a),"'"));if(0>
a)return Error("Expected ".concat(b," to be positive, but it was ").concat(a));if(!isFinite(a)||Math.floor(a)!==a)return Error("Expected ".concat(b," to be an integer, but it was ").concat(a))};var g=a(b(435))},7015:function(a,c,b){a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,b){if("string"!==typeof a)return Error("Expected ".concat(b," to be a string, but it was a ").concat((0,g.default)(a)));if(a.length>h)return Error("Expected ".concat(b," to be less than ").concat(h,
" characters, but it was ").concat(a.length," characters"));if(1>a.length)return Error("Expected ".concat(b," to be non-blank"));if(!k.test(a))return Error("Expected ".concat(b," to contain only valid characters, but it was ").concat(a,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var g=a(b(435)),k=/^[A-Za-z0-9.:@_/-]+$/,h=127},4650:function(a,c){Object.defineProperty(c,"__esModule",{value:!0});c.embedRequestId=function(a,c){return c?[c,a].join("::"):a}},7552:function(a,
c,b){a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c.mergeLists=function(a,b){return a||b?[].concat((0,g.default)(a||[]),(0,g.default)(b||[])):p};var g=a(b(2033))},9739:function(a,c){Object.defineProperty(c,"__esModule",{value:!0});c.dispatchMetricEvent=function(a,c){if("undefined"!==typeof e){if("function"===typeof CustomEvent){var b=new CustomEvent("katal.metrics.publish",{detail:{metric:a,context:c.getFields()}});e.dispatchEvent(b)}(b=e.__KATAL_METRICS_EXTENSION__)&&b.publish(a,c.getFields())}}},
949:function(a,c,b){function g(a,b){if(a.length>n)return Error("Expected Dimension name for value ".concat(b," to be ").concat(n," characters or less, but it was ").concat(a.length," characters"));if(1>a.length)return Error("Expected Dimension name for value ".concat(b," to be non-blank"));if(!h.test(a))return Error("Expected Dimension name for value ".concat(b," to contain only ASCII characters, but it was ").concat(a));if(!e.test(a))return Error("Expected Dimension name for value ".concat(b," to contain at least one non whitespace character, but it was ").concat(a));
if(a.startsWith(":"))return Error("Expected Dimension name for value ".concat(b,' to not start with a colon (":"), but it was ').concat(a));if(b.length>q)return Error("Expected Dimension value for name ".concat(a," to be ").concat(q," characters or less, but it was ").concat(b.length," characters"));if(1>b.length)return Error("Expected Dimension value for name ".concat(a," to be non-blank"));if(!h.test(b))return Error("Expected Dimension value for name ".concat(a," to contain only ASCII characters, but it was ").concat(b));
if(!e.test(b))return Error("Expected Dimension value for name ".concat(a," to contain at least one non whitespace character, but it was ").concat(b,"}"))}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a){return(0,k.default)(a,function(a){return g(a.name,a.value)})};var k=a(b(8786)),h=/^[\x20-\x7E]+$/,e=/^.*\S+.*$/,n=255,q=1024},7843:function(a,c,b){function g(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function(a){return a?
c:b})(a)}a=b(8135);var k=b(435);Object.defineProperty(c,"_y",{enumerable:!0,get:function(){return n.default}});c.jb=void 0;Object.defineProperty(c,"FW",{enumerable:!0,get:function(){return e.default}});var h=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==k(a)&&"function"!==typeof a)return{default:a};if((b=g(b))&&b.has(a))return b.get(a);var c={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in a)if("default"!==l&&Object.prototype.hasOwnProperty.call(a,l)){var y=
f?Object.getOwnPropertyDescriptor(a,l):null;y&&(y.get||y.set)?Object.defineProperty(c,l,y):c[l]=a[l]}c.default=a;b&&b.set(a,c);return c}(b(767));c.jb=h;var e=a(b(5406)),n=a(b(817));a(b(6744));b(6543);b(5728)},8907:function(a,c,b){function g(a){var b=k();return function(){var c=(0,m.default)(a);if(b){var d=(0,m.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,r.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(7296)),e=a(b(2E3)),n=a(b(4052)),q=a(b(4626)),r=a(b(1803)),m=a(b(6368)),f=a(b(37)),l=a(b(3027));b=function(a){function b(a){var d=1<arguments.length&&arguments[1]!==p?arguments[1]:0;(0,h.default)(this,b);var f=c.call(this,a);f.value=d;return f}(0,q.default)(b,a);var c=
g(b);(0,e.default)(b,[{key:"value",get:function(){return this._value},set:function(a){this._value=Math.round(a)}},{key:"type",get:function(){return f.default.Types.Counter}},{key:"add",value:function(a){this.value+=a}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var a=(0,n.default)((0,m.default)(b.prototype),"validationError",this).call(this);return a?a:(0,l.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}}]);return b}(f.default);
c["default"]=b},2973:function(a,c,b){function g(a){var b=k();return function(){var c=(0,m.default)(a);if(b){var f=(0,m.default)(this).constructor;c=Reflect.construct(c,arguments,f)}else c=c.apply(this,arguments);return(0,r.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}var h=b(8135);Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=void 0;var e=h(b(7296)),n=h(b(2E3)),q=h(b(4626)),r=h(b(1803)),m=h(b(6368));a=h(b(1514));var f=h(b(4039)),l=h(b(855));b=function(a){function b(a){(0,e.default)(this,b);return c.call(this,"".concat(b.HTTP_REQUEST_PREFIX,".").concat(a))}(0,q.default)(b,a);var c=g(b);(0,n.default)(b,[{key:"url",get:function(){return this.getNamedMetricValue(b.URL_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.URL_SUFFIX,l.default,a)}},{key:"urlMetric",get:function(){return this.getNamedMetric(b.URL_SUFFIX)}},
{key:"statusCode",get:function(){return this.getNamedMetricValue(b.STATUS_CODE_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.STATUS_CODE_SUFFIX,l.default,a)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(b.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(b.STATUS_TEXT_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.STATUS_TEXT_SUFFIX,l.default,a)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(b.STATUS_TEXT_SUFFIX)}}]);
return b}(f.default);c["default"]=b;(0,a.default)(b,"HTTP_REQUEST_PREFIX","HTTPRequest");(0,a.default)(b,"URL_SUFFIX","URL");(0,a.default)(b,"STATUS_CODE_SUFFIX","StatusCode");(0,a.default)(b,"STATUS_TEXT_SUFFIX","StatusText")},5702:function(a,c,b){function g(a){var b=k();return function(){var c=(0,r.default)(a);if(b){var f=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,f)}else c=c.apply(this,arguments);return(0,q.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||
Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(m){return!1}}var h=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var e=h(b(7296)),n=h(b(4626)),q=h(b(1803)),r=h(b(6368));a=h(b(1514));b=function(a){function b(){(0,e.default)(this,b);return c.call(this,b.INITIALIZE_METRIC_NAME)}(0,n.default)(b,a);var c=g(b);return b}(h(b(4039)).default);c["default"]=b;(0,
a.default)(b,"INITIALIZE_METRIC_NAME","Initialization")},1284:function(a,c,b){function g(a){var b=k();return function(){var c=(0,r.default)(a);if(b){var f=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,f)}else c=c.apply(this,arguments);return(0,q.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),
!0}catch(l){return!1}}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(7296)),e=a(b(2E3)),n=a(b(4626)),q=a(b(1803)),r=a(b(6368)),m=a(b(9469)),f=a(b(2859));b=function(a){function b(a){(0,h.default)(this,b);a=c.call(this,a);a.namedMetrics={};return a}(0,n.default)(b,a);var c=g(b);(0,e.default)(b,[{key:"metricList",get:function(){return(0,f.default)(this.namedMetrics)}},{key:"setNamedMetric",value:function(a,b){var c=this.getNameForSubMetric(a);b=b(c);b.canMonitor&&
(b.isMonitor=this.isMonitor);this.namedMetrics[a]=b}},{key:"setOrDeleteNamedMetricValue",value:function(a,b,c){c==p?this.deleteNamedMetric(a):this.getOrCreateNamedMetric(a,function(a){return new b(a,c)}).value=c}},{key:"getOrCreateNamedMetric",value:function(a,b){this.namedMetrics[a]||this.setNamedMetric(a,b);return this.namedMetrics[a]}},{key:"getNamedMetric",value:function(a){return this.namedMetrics[a]}},{key:"deleteNamedMetric",value:function(a){delete this.namedMetrics[a]}},{key:"getNamedMetricValue",
value:function(a){return(a=this.getNamedMetric(a))?a.value:p}},{key:"getNameForSubMetric",value:function(a){return"".concat(this.name,".").concat(a)}}]);return b}(m.default);c["default"]=b},37:function(a,c,b){var g=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var k=g(b(435)),h=g(b(7296)),e=g(b(2E3));a=g(b(1514));var n=g(b(7015));b=g(b(421));g=function(){function a(b){(0,h.default)(this,a);this._name=b;this._isMonitor=!1}(0,e.default)(a,[{key:"name",get:function(){return this._name}},
{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){this.isMonitor=0<arguments.length&&arguments[0]!==p?arguments[0]:!0;return this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(a){this._isMonitor=!!a}},{key:"canMonitor",get:function(){throw Error("Subclass of KatalMetricObject must implement canMonitor");}},{key:"type",get:function(){throw Error("Subclass of KatalMetricObject must implement type getter");}},{key:"validationError",value:function(){return this.isMonitor!==
p&&"boolean"!==typeof this.isMonitor?Error("Field isMonitor should be a boolean, but it was a ".concat((0,k.default)(this.isMonitor))):(0,n.default)(this.name,"field name")}}]);return a}();c["default"]=g;(0,a.default)(g,"Types",b.default)},9469:function(a,c,b){function g(a){var b=k();return function(){var c=(0,f.default)(a);if(b){var d=(0,f.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,m.default)(this,c)}}function k(){if("undefined"===typeof Reflect||
!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(7296)),e=a(b(2E3)),n=a(b(4052)),q=a(b(406)),r=a(b(4626)),m=a(b(1803)),f=a(b(6368)),l=a(b(37)),y=a(b(8786));b=function(a){function b(a){(0,h.default)(this,b);return c.call(this,a)}(0,r.default)(b,a);var c=g(b);(0,e.default)(b,
[{key:"metricList",get:function(){throw Error("Subclass of KatalMetricObjectList must implement metricList getter");}},{key:"isMonitor",get:function(){return(0,n.default)((0,f.default)(b.prototype),"isMonitor",this)},set:function(a){(0,q.default)((0,f.default)(b.prototype),"isMonitor",a,this,!0);this.metricList.forEach(function(b){b.canMonitor&&(b.isMonitor=a)})}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return l.default.Types.List}},{key:"validationError",value:function(){return(0,
y.default)(this.metricList,function(a){return a.validationError()})}}]);return b}(l.default);c["default"]=b},855:function(a,c,b){function g(a){var b=k();return function(){var c=(0,l.default)(a);if(b){var d=(0,l.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,f.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(w){return!1}}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(435)),e=a(b(7296)),n=a(b(2E3)),q=a(b(2143)),r=a(b(4052)),m=a(b(4626)),f=a(b(1803)),l=a(b(6368)),y=a(b(1514)),d=a(b(37));b=function(a){function b(a,f){(0,e.default)(this,b);a=c.call(this,a);(0,y.default)((0,q.default)(a),"truncate",!1);a.value=f;return a}(0,m.default)(b,a);var c=g(b);(0,n.default)(b,[{key:"value",get:function(){return this._value},set:function(a){if("number"===
typeof a||"boolean"===typeof a)a=a.toString();this._value=a}},{key:"type",get:function(){return d.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var a=(0,r.default)((0,l.default)(b.prototype),"validationError",this).call(this);if(a)return a;if("string"!==typeof this.value)return Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,h.default)(this.value)));if(this.value.length>
b.MAX_SIZE)if(this.truncate)this.value=this.value.substring(0,b.MAX_SIZE);else return Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(b.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."))}}]);return b}(d.default);c["default"]=b;(0,y.default)(b,"MAX_SIZE",256)},4039:function(a,c,b){function g(a){var b=k();return function(){var c=(0,m.default)(a);if(b){var f=(0,m.default)(this).constructor;c=Reflect.construct(c,arguments,
f)}else c=c.apply(this,arguments);return(0,r.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}var h=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var e=h(b(7296)),n=h(b(2E3)),q=h(b(4626)),r=h(b(1803)),m=h(b(6368));a=h(b(1514));var f=h(b(1284)),l=h(b(3821)),
y=h(b(8907));b=function(a){function b(a){(0,e.default)(this,b);a=c.call(this,a);a.setNamedMetric(b.LATENCY_SUFFIX,function(a){return new l.default(a)});a.setNamedMetric(b.FAILURE_SUFFIX,function(a){return new y.default(a,1)});return a}(0,q.default)(b,a);var c=g(b);(0,n.default)(b,[{key:"setFailure",value:function(){this.failureMetric.value=(0<arguments.length&&arguments[0]!==p?arguments[0]:1)?1:0}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(a){this.latencyMetric.value=
a}},{key:"latencyMetric",get:function(){return this.getNamedMetric(b.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(b.FAILURE_SUFFIX)}}]);return b}(f.default);c["default"]=b;(0,a.default)(b,"LATENCY_SUFFIX","Latency");(0,a.default)(b,"FAILURE_SUFFIX","Failure")},4253:function(a,c,b){function g(a){var b=k();return function(){var c=(0,m.default)(a);if(b){var f=(0,m.default)(this).constructor;c=Reflect.construct(c,arguments,f)}else c=c.apply(this,arguments);return(0,
r.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(7296)),e=a(b(2E3)),n=a(b(4052)),q=a(b(4626)),r=a(b(1803)),m=a(b(6368)),f=a(b(37)),l=a(b(3027));b=function(a){function b(a,f){(0,h.default)(this,b);a=
c.call(this,a);a.value=f;return a}(0,q.default)(b,a);var c=g(b);(0,e.default)(b,[{key:"value",get:function(){return this._value},set:function(a){this._value=a==p?a:Math.round(a)}},{key:"type",get:function(){return f.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var a=(0,n.default)((0,m.default)(b.prototype),"validationError",this).call(this);return a?a:(0,l.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}}]);
return b}(f.default);c["default"]=b},3821:function(a,c,b){function g(a){var b=k();return function(){var c=(0,f.default)(a);if(b){var l=(0,f.default)(this).constructor;c=Reflect.construct(c,arguments,l)}else c=c.apply(this,arguments);return(0,m.default)(this,c)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}
a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(7296)),e=a(b(2E3)),n=a(b(406)),q=a(b(4052)),r=a(b(4626)),m=a(b(1803)),f=a(b(6368));b=function(a){function b(a,f){(0,h.default)(this,b);a=c.call(this,a,p);a.start(f);a._value=p;return a}(0,r.default)(b,a);var c=g(b);(0,e.default)(b,[{key:"start",value:function(a){this._startTime=a||this.now()}},{key:"stop",value:function(a){return this._stopTime=a||this.now()}},{key:"isStopped",get:function(){return this._stopTime!==
p}},{key:"value",get:function(){(0,q.default)((0,f.default)(b.prototype),"value",this)===p&&(this.isStopped||this.stop(),(0,n.default)((0,f.default)(b.prototype),"value",this.stopTime-this.startTime,this,!0));return(0,q.default)((0,f.default)(b.prototype),"value",this)},set:function(a){(0,n.default)((0,f.default)(b.prototype),"value",a,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",value:function(){return performance.now()}}]);
return b}(a(b(4253)).default);c["default"]=b},421:function(a,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var b;a=b||(b={});a.String="String";a.Counter="Counter";a.Timer="Timer";a.List="List";c["default"]=b},767:function(a,c,b){a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"Counter",{enumerable:!0,get:function(){return h.default}});Object.defineProperty(c,"HttpRequest",{enumerable:!0,get:function(){return m.default}});Object.defineProperty(c,
"Initialization",{enumerable:!0,get:function(){return r.default}});Object.defineProperty(c,"Object",{enumerable:!0,get:function(){return g.default}});Object.defineProperty(c,"String",{enumerable:!0,get:function(){return k.default}});Object.defineProperty(c,"TimedAttempt",{enumerable:!0,get:function(){return q.default}});Object.defineProperty(c,"Timer",{enumerable:!0,get:function(){return e.default}});Object.defineProperty(c,"TimerStopwatch",{enumerable:!0,get:function(){return n.default}});var g=
a(b(37)),k=a(b(855)),h=a(b(8907)),e=a(b(4253)),n=a(b(3821)),q=a(b(4039)),r=a(b(5702)),m=a(b(2973))},5728:function(a,c){Object.defineProperty(c,"__esModule",{value:!0})},8119:function(a,c,b){function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);b&&(f=f.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,f)}return c}function k(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};
b%2?g(c,!0).forEach(function(b){(0,h.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}a=b(8135);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=a(b(1514)),t=a(b(7296)),n=a(b(2E3));b=function(){function a(){var b=0<arguments.length&&arguments[0]!==p?arguments[0]:a.REGIONS.NA,c=1<arguments.length?arguments[1]:
p,f=2<arguments.length?arguments[2]:p,l=3<arguments.length&&arguments[3]!==p?arguments[3]:{},g=4<arguments.length?arguments[4]:p;(0,t.default)(this,a);b=a.createSushiUrl(b,c);l=a.createCsmUserContext(b,l);this.ue_csm=this.setupMockCSMObject(l);this.encapsulatedWindow=this.setupMockWindow(this.ue_csm);this.transportationClientCode(this.ue_csm,e);g&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(a,b){g(a,b);return!0}});this.clientCode(this.ue_csm,this.encapsulatedWindow);this.errorHandler=f}(0,
n.default)(a,null,[{key:"createSushiUrl",value:function(b,c){if(!c)throw Error("Sushi Driver was not provided with a source group.");switch(b){case a.REGIONS.NA:b="unagi-na";break;case a.REGIONS.EU:b="unagi-eu";break;case a.REGIONS.FE:b="unagi-fe";break;case a.REGIONS.CN:b="unagi-cn";break;default:throw Error("Unrecognized region '".concat(b,"' provided to SushiClient."));}return"https://".concat(b,".amazon.com/1/events/").concat(c)}},{key:"createCsmUserContext",value:function(a){return k({hiPriFlushInterval:1E3,
lowPriFlushInterval:1E4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:p,errorHandlerFunction:console.log,sushiUrl:a},1<arguments.length&&arguments[1]!==p?arguments[1]:{})}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]);(0,n.default)(a,[{key:"event",value:function(a,b,c,l){4<arguments.length&&arguments[4]!==p&&arguments[4]&&console.log("SushiClient wrapper publishing the following:",{data:a,producerId:b,schemaId:c,options:l});return this.ue_csm.ue.event(a,b,c,
l)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(a){this.ue_csm.ue.onSushiFlush(a)}},{key:"onSushiUnload",value:function(a){this.ue_csm.ue.onSushiUnload(a)}},{key:"setupMockCSMObject",value:function(a){var b=this;return{ue_hpsi:a.hiPriFlushInterval,ue_lpsi:a.lowPriFlushInterval,ue:{ssw:a.sessionStorageWrapper,log:function(a,c){b.errorHandler?b.errorHandler(a):console.log("An error has occurred in SushiClient channel "+c,a)},exec:function(a,b){return a},
event:function(a,b,c){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(a,b,c){c=c||e;e.EventTarget&&e.EventTarget.prototype&&e.EventTarget.prototype.addEventListener?e.EventTarget.prototype.addEventListener.call(c,a,b,!!e.ue_clf):c.addEventListener?c.addEventListener(a,b,!!e.ue_clf):c.attachEvent&&c.attachEvent("on"+a,b)}},ueLogError:a.errorHandlerFunction,ue_surl:a.sushiUrl,ue_id:a.requestId,ue_err_chan:a.errorChannel}}},{key:"setupMockWindow",value:function(a){return{ue_csm:a,
ueLogError:a.ueLogError,ue:a.ue,setTimeout:function(a,b){return e.setTimeout(a,b)}}}},{key:"clientCode",value:function(a,b){a.ue.exec(function(a,b){function c(){for(var a=0;a<arguments.length;a++){var c=arguments[a];try{if(c.isSupported){var f=N.buildPayload(z,E);var d=c.send(Q,f)}else throw dummyException;return d}catch(Z){}}C({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},b.ue_err_chan||"jserr")}function f(){if(E.length){for(var a=
0;a<M.length;a++)M[a]();c(t._sBcn||{},t._ajx||{});E=[];u={};z={};G=F=J=O=0}}function l(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}function g(a){try{return JSON.stringify(a)}catch(X){}return null}function m(c,d,m,h){var k=!1;h=h||{};B++;
B==n&&C({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},b.ue_err_chan||"jserr");var e;if(e=!(B>=n))(e=c&&-1<c.constructor.toString().indexOf("Object")&&d&&-1<d.constructor.toString().indexOf("String")&&m&&-1<m.constructor.toString().indexOf("String"))||A++;e&&(t.count&&t.count("Event:"+m,1),c.producerId=c.producerId||d,c.schemaId=c.schemaId||m,c.timestamp=l(),d=Date.now?Date.now():+new Date,m=Math.random().toString().substring(2,
12),c.messageId=a.ue_id+"-"+d+"-"+m,h&&!h.ssd&&(c.sessionId=c.sessionId||a.ue_sid,c.requestId=c.requestId||a.ue_id,c.obfuscatedMarketplaceId=c.obfuscatedMarketplaceId||a.ue_mid),(d=g(c))?(d=d.length,(E.length==r||J+d>q)&&f(),J+=d,c={data:N.compressEvent(c)},E.push(c),(h||{}).n?0===K?f():G||(G=b.setTimeout(f,K)):F||(F=b.setTimeout(f,W)),k=!0):k=!1);!k&&a.ue_int&&console.error("Invalid JS Nexus API call");return k}function h(){if(!H){for(var b=0;b<D.length;b++)D[b]();for(b=0;b<M.length;b++)M[b]();E.length&&
(a.ue_sbuimp&&a.ue&&a.ue.ssw&&(b=g({dct:z,evt:E}),a.ue.ssw("eeldata",b),a.ue.ssw("eelsts","unk")),c(t._sBcn||{}));H=!0}}function k(a){D.push(a)}function e(a){M.push(a)}var n=1E3,r=499,q=524288,p=function(){},t=a.ue||{},C=t.log||p,U=a.uex||p;(a.uet||p)("bb","ue_sushi_v1",{wb:1});var Q=a.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",R=["messageId","timestamp"],E=[],u={},z={},J=0,O=0,A=0,B=0,D=[],M=[],H=!1,G,F,K=void 0===a.ue_hpsi?1E3:a.ue_hpsi,W=void 0===a.ue_lpsi?
1E4:a.ue_lpsi,N=function(){function a(a){u[a]="#"+O++;z[u[a]]=a;return u[a]}function b(c){if(!(c instanceof Function)){if(c instanceof Array){for(var f=[],d=c.length,l=0;l<d;l++)f[l]=b(c[l]);return f}if(c instanceof Object){f={};for(d in c)c.hasOwnProperty(d)&&(f[u[d]?u[d]:a(d)]=-1===R.indexOf(d)?b(c[d]):c[d]);return f}return"string"===typeof c&&(c.length>("#"+O).length||"#"===c.charAt(0))?u[c]?u[c]:a(c):c}}return{compressEvent:b,buildPayload:function(){return g({cs:{dct:z},events:E})}}}();(function(){if(t.event&&
t.event.isStub){if(a.ue_sbuimp&&a.ue&&a.ue.ssw){var b=a.ue.ssw("eelsts").val;if(b&&"unk"===b&&(b=a.ue.ssw("eeldata").val)){a:{try{var c=JSON.parse(b);break a}catch(Y){}c=null}c&&c.evt instanceof Array&&c.dct instanceof Object&&(E=c.evt,z=c.dct,E&&z&&(f(),a.ue.ssw("eeldata","{}"),a.ue.ssw("eelsts","scs")))}}t.event.replay(function(a){a[3]=a[3]||{};a[3].n=1;m.apply(this,a)});t.onSushiUnload.replay(function(a){k(a[0])});t.onSushiFlush.replay(function(a){e(a[0])})}})();t.attach("beforeunload",h);t.attach("pagehide",
h);t._cmps=N;t.event=m;t.event.reset=function(){B=0};t.onSushiUnload=k;t.onSushiFlush=e;try{b.P&&b.P.register&&b.P.register("sushi-client",p)}catch(V){a.ueLogError(V,{logLevel:"WARN"})}U("ld","ue_sushi_v1",{wb:1})},"Nxs-JS-Client")(a,b)}},{key:"transportationClientCode",value:function(a,b){a.ue.exec(function(a,b){var c=function(){},d=function(){return{send:function(a,f){if(f&&a){if(b.XDomainRequest){var d=new XDomainRequest;d.onerror=c;d.ontimeout=c;d.onprogress=c;d.onload=c;d.timeout=0}else if(b.XMLHttpRequest){if(d=
new XMLHttpRequest,!("withCredentials"in d))throw"";}else d=void 0;if(!d)throw"";d.open("POST",a,!0);d.setRequestHeader&&d.setRequestHeader("Content-type","text/plain");d.send(f)}},isSupported:!0}}(),f=function(){return{send:function(b,c){if(b&&c)if(navigator.sendBeacon(b,c))a.ue_sbuimp&&a.ue&&a.ue.ssw&&a.ue.ssw("eelsts","scs");else throw"";},isSupported:!!navigator.sendBeacon&&!(b.cordova&&b.cordova.platformId&&"ios"==b.cordova.platformId)}}();a.ue._ajx=d;a.ue._sBcn=f},"Transportation-clients")(a,
b)}}]);return a}();c["default"]=b},4808:function(a){a.exports=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"]},7257:function(a,c,b){c=b(4808);var g=new RegExp("("+c.join("|")+")","ig");a.exports=function(a){return!!a.match(g)}},9846:function(a,c,b){c=b(652);b=b(1246);b.v1=c;b.v4=b;a.exports=b},5459:function(a){for(var c=[],b=0;256>b;++b)c[b]=(b+256).toString(16).substr(1);a.exports=function(a,b){b=b||0;return[c[a[b++]],
c[a[b++]],c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]]].join("")}},7019:function(a){var c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof e.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(c){var b=new Uint8Array(16);a.exports=function(){c(b);return b}}else{var g=Array(16);a.exports=
function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),g[a]=b>>>((a&3)<<3)&255;return g}}},652:function(a,c,b){var g=b(7019),e=b(5459),h,t,n=0,q=0;a.exports=function(a,b,c){c=b&&c||0;var f=b||[];a=a||{};var m=a.node||h,d=a.clockseq!==p?a.clockseq:t;if(null==m||null==d){var k=g();null==m&&(m=h=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]);null==d&&(d=t=(k[6]<<8|k[7])&16383)}k=a.msecs!==p?a.msecs:(new Date).getTime();var v=a.nsecs!==p?a.nsecs:q+1,r=k-n+(v-q)/1E4;0>r&&a.clockseq===p&&(d=d+1&
16383);(0>r||k>n)&&a.nsecs===p&&(v=0);if(1E4<=v)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");n=k;q=v;t=d;k+=122192928E5;a=(1E4*(k&268435455)+v)%4294967296;f[c++]=a>>>24&255;f[c++]=a>>>16&255;f[c++]=a>>>8&255;f[c++]=a&255;a=k/4294967296*1E4&268435455;f[c++]=a>>>8&255;f[c++]=a&255;f[c++]=a>>>24&15|16;f[c++]=a>>>16&255;f[c++]=d>>>8|128;f[c++]=d&255;for(d=0;6>d;++d)f[c+d]=m[d];return b?b:e(f)}},1246:function(a,c,b){var g=b(7019),e=b(5459);a.exports=function(a,b,c){c=b&&c||0;"string"==
typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||g)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var h=0;16>h;++h)b[c+h]=a[h];return b||e(a)}},6470:function(){},4635:function(a){a.exports=function(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,e=Array(b);c<b;c++)e[c]=a[c];return e};a.exports.__esModule=!0;a.exports["default"]=a.exports},9218:function(a,c,b){var g=b(4635);a.exports=function(a){if(Array.isArray(a))return g(a)};a.exports.__esModule=!0;a.exports["default"]=
a.exports},2143:function(a){a.exports=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a};a.exports.__esModule=!0;a.exports["default"]=a.exports},7296:function(a){a.exports=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");};a.exports.__esModule=!0;a.exports["default"]=a.exports},2E3:function(a){function c(a,c){for(var b=0;b<c.length;b++){var g=c[b];g.enumerable=g.enumerable||!1;g.configurable=
!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}a.exports=function(a,g,e){g&&c(a.prototype,g);e&&c(a,e);Object.defineProperty(a,"prototype",{writable:!1});return a};a.exports.__esModule=!0;a.exports["default"]=a.exports},1514:function(a){a.exports=function(a,b,g){b in a?Object.defineProperty(a,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[b]=g;return a};a.exports.__esModule=!0;a.exports["default"]=a.exports},4052:function(a,c,b){function g(){"undefined"!==typeof Reflect&&
Reflect.get?(a.exports=g=Reflect.get.bind(),a.exports.__esModule=!0):(a.exports=g=function(a,b,c){var g=e(a,b);if(g)return g=Object.getOwnPropertyDescriptor(g,b),g.get?g.get.call(3>arguments.length?a:c):g.value},a.exports.__esModule=!0);a.exports["default"]=a.exports;return g.apply(this,arguments)}var e=b(8428);a.exports=g;a.exports.__esModule=!0;a.exports["default"]=a.exports},6368:function(a){function c(b){a.exports=c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||
Object.getPrototypeOf(a)};a.exports.__esModule=!0;a.exports["default"]=a.exports;return c(b)}a.exports=c;a.exports.__esModule=!0;a.exports["default"]=a.exports},4626:function(a,c,b){var g=b(1595);a.exports=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&g(a,b)};a.exports.__esModule=
!0;a.exports["default"]=a.exports},8135:function(a){a.exports=function(a){return a&&a.__esModule?a:{"default":a}};a.exports.__esModule=!0;a.exports["default"]=a.exports},1753:function(a){a.exports=function(a){if("undefined"!==typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)};a.exports.__esModule=!0;a.exports["default"]=a.exports},7513:function(a){a.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
};a.exports.__esModule=!0;a.exports["default"]=a.exports},1803:function(a,c,b){var g=b(435)["default"],e=b(2143);a.exports=function(a,b){if(b&&("object"===g(b)||"function"===typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return e(a)};a.exports.__esModule=!0;a.exports["default"]=a.exports},406:function(a,c,b){function g(a,b,c,k){g="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(a,b,c,g){if(a=e(a,b)){a=Object.getOwnPropertyDescriptor(a,
b);if(a.set)return a.set.call(g,c),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(g,b)){if(!a.writable)return!1;a.value=c;Object.defineProperty(g,b,a)}else h(g,b,c);return!0};return g(a,b,c,k)}var e=b(8428),h=b(1514);a.exports=function(a,b,c,e,m){if(!g(a,b,c,e||a)&&m)throw Error("failed to set property");return c};a.exports.__esModule=!0;a.exports["default"]=a.exports},1595:function(a){function c(b,g){a.exports=c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=
b;return a};a.exports.__esModule=!0;a.exports["default"]=a.exports;return c(b,g)}a.exports=c;a.exports.__esModule=!0;a.exports["default"]=a.exports},8428:function(a,c,b){var g=b(6368);a.exports=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=g(a),null!==a););return a};a.exports.__esModule=!0;a.exports["default"]=a.exports},2033:function(a,c,b){var g=b(9218),e=b(1753),h=b(248),p=b(7513);a.exports=function(a){return g(a)||e(a)||h(a)||p()};a.exports.__esModule=!0;a.exports["default"]=
a.exports},435:function(a){function c(b){"@babel/helpers - typeof";return a.exports=c="function"==typeof Symbol&&"symbol"==H(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":H(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":H(a)},a.exports.__esModule=!0,a.exports["default"]=a.exports,c(b)}a.exports=c;a.exports.__esModule=!0;a.exports["default"]=a.exports},248:function(a,c,b){var e=b(4635);
a.exports=function(a,b){if(a){if("string"===typeof a)return e(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return e(a,b)}};a.exports.__esModule=!0;a.exports["default"]=a.exports}},u={};(function(){C.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};C.d(c,{a:c});return c}})();(function(){C.d=
function(a,c){for(var b in c)C.o(c,b)&&!C.o(a,b)&&Object.defineProperty(a,b,{enumerable:!0,get:c[b]})}})();(function(){C.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)}})();(function(){function a(a,b){var d="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!d){if(Array.isArray(a)||(d=c(a))||b&&a&&"number"===typeof a.length){d&&(a=d);var f=0;b=function(){};return{s:b,n:function(){return f>=a.length?{done:!0}:{done:!1,value:a[f++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var l=!0,e=!1,g;return{s:function(){d=d.call(a)},n:function(){var a=d.next();l=a.done;return a},e:function(a){e=!0;g=a},f:function(){try{if(!l&&null!=d["return"])d["return"]()}finally{if(e)throw g;}}}}function c(a,c){if(a){if("string"===typeof a)return b(a,c);var d=Object.prototype.toString.call(a).slice(8,-1);"Object"===d&&a.constructor&&(d=a.constructor.name);if("Map"===d||"Set"===d)return Array.from(a);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return b(a,c)}}function b(a,
b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function g(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function k(a,b,c){b&&g(a.prototype,b);c&&g(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function h(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function u(a,b){for(var c=
0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function n(a,b,c){b&&u(a.prototype,b);c&&u(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function q(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function r(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function m(a,b,c){b&&r(a.prototype,b);c&&r(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function l(a,b,c){b&&f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function y(){return(0,H.v4)()}function d(a,b){e.P.now(a).execute(function(c){c||(console.log("Registering "+a),
b(a))})}function w(a){try{e.P.register(a,function(){return{getMetricsPublisher:function(a,b,c,d){return new F(a,b,c,d)},getAmazonDomainHelper:function(){return new x},getPlatformDetector:function(){return new D},generateUUID:y}})}catch(Q){console.log("Already registered "+a)}}var v=C(7843),L=C(2798),x=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");}k(b,[{key:"isAmazonDomain",value:function(a){return b.AMAZON_ENDPOINT_REGEX.test(a)}},{key:"isDevoDomain",
value:function(a){return b.DEVO_ENDPOINT_REGEX.test(a)}},{key:"isAmazonProdDomain",value:function(a){return this.isAmazonDomain(a)&&!this.isDevoDomain(a)}},{key:"getMarketplaceDomain",value:function(a){return a&&(a=a.match(b.AMAZON_ENDPOINT_REGEX))?(a=a[0],a.startsWith(".")?a.substring(1):a):b.US_AMAZON_DOMAIN}},{key:"getMarketplaceRealm",value:function(a){a=this.getMarketplaceDomain(a);return(a=b.DOMAIN_REALEM_MAPPING[a])?a:b.NA_AMAZON_REALM}},{key:"encodeUrl",value:function(b){try{if(!b)return null;
var c=new URL(b);b="";var d=a(c.searchParams),f;try{for(d.s();!(f=d.n()).done;){var l=f.value;b="".concat(0===b.length?"":b+"\x26").concat(l[0],"\x3d").concat(encodeURIComponent(l[1]))}}catch(J){d.e(J)}finally{d.f()}return c.protocol+"//"+c.host+("/"===c.pathname?"":c.pathname)+(0<b.length?"?"+b:"")+(c.hash?c.hash:"")}catch(J){return console.error(J),null}}}]);return b}();h(x,"NA_AMAZON_REALM","NAAmazon");h(x,"EU_AMAZON_REALM","EUAmazon");h(x,"FE_AMAZON_REALM","FEAmazon");h(x,"CN_AMAZON_REALM","CNAmazon");
h(x,"AMAZON_ENDPOINT_REGEX",/(^|\.)amazon\.((ae|ca|cn|com|de|eg|es|eu|fr|in|it|nl|pl|sa|se|sg|cl|co\.(jp|uk|za))|com\.(au|br|mx|sg|tr|co|ng|be))$/);h(x,"US_AMAZON_DOMAIN","amazon.com");h(x,"DEVO_ENDPOINT_REGEX",/(localhost)|(\.integ\.)|([-]*development\.)|(dev-dsk-)|(\.corp\.)/);h(x,"DOMAIN_REALEM_MAPPING",{"amazon.com":x.NA_AMAZON_REALM,"amazon.ca":x.NA_AMAZON_REALM,"amazon.com.br":x.NA_AMAZON_REALM,"amazon.com.co":x.NA_AMAZON_REALM,"amazon.com.mx":x.NA_AMAZON_REALM,"amazon.ae":x.EU_AMAZON_REALM,
"amazon.com.be":x.EU_AMAZON_REALM,"amazon.co.uk":x.EU_AMAZON_REALM,"amazon.com.tr":x.EU_AMAZON_REALM,"amazon.de":x.EU_AMAZON_REALM,"amazon.eg":x.EU_AMAZON_REALM,"amazon.es":x.EU_AMAZON_REALM,"amazon.eu":x.EU_AMAZON_REALM,"amazon.fr":x.EU_AMAZON_REALM,"amazon.in":x.EU_AMAZON_REALM,"amazon.it":x.EU_AMAZON_REALM,"amazon.nl":x.EU_AMAZON_REALM,"amazon.pl":x.EU_AMAZON_REALM,"amazon.sa":x.EU_AMAZON_REALM,"amazon.se":x.EU_AMAZON_REALM,"amazon.cn":x.CN_AMAZON_REALM,"amazon.co.jp":x.FE_AMAZON_REALM,"amazon.com.au":x.FE_AMAZON_REALM,
"amazon.sg":x.FE_AMAZON_REALM});var z=C(7257),B=C.n(z),A;(function(a){a.Android_App="android_app";a.iOS_App="ios_app";a.Android_Browser="android_browser";a.iOS_Browser="ios_browser";a.Other="other"})(A||(A={}));var I;(function(a){a.Android="android";a.iOS="ios";a.Other="other"})(I||(I={}));var D=function(){function a(){var b;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");q(this,"platformStrategy",(b={},q(b,I.iOS,{webView:A.iOS_App,browser:A.iOS_Browser}),q(b,I.Android,
{webView:A.Android_App,browser:A.Android_Browser}),q(b,I.Other,{webView:A.Other,browser:A.Other}),b))}n(a,[{key:"getBrowserName",value:function(){return this.testUserAgent(/edge|edg|edgiOS|edgA/i)?"edge":this.testUserAgent(/opt|opr\//i)?"opera":this.testUserAgent(/firefox|fxios/i)?"firefox":this.testUserAgent(/chrome|chromium|crios/i)?"chrome":this.testUserAgent(/safari/i)?"safari":"unknown"}},{key:"isRunningInWebView",value:function(){var a=B()(e.navigator.userAgent);a||(a=this.testUserAgent(/Amazon\.com\/\d+\.\d+/i));
return a}},{key:"getOSName",value:function(){return this.determineOS()}},{key:"getPlatform",value:function(){var a=this.determineOS();return this.isRunningInWebView()?this.platformStrategy[a].webView:this.platformStrategy[a].browser}},{key:"determineOS",value:function(){return this.isIOS()?I.iOS:this.isAndroid()?I.Android:I.Other}},{key:"testUserAgent",value:function(a){try{return a.test(e.navigator.userAgent)}catch(R){return!1}}},{key:"isIOS",value:function(){return this.testUserAgent(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&
!this.testUserAgent(/trident|Edge/i)}},{key:"isAndroid",value:function(){return this.testUserAgent(/android.([1-9]|[L-Z])/i)&&!this.testUserAgent(/trident|Edge/i)}}]);return a}(),G=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}m(a,[{key:"getCookieValue",value:function(a){var b,c;return 0<(null===(b=e.document)||void 0===b?void 0:null===(c=b.cookie)||void 0===c?void 0:c.length)&&a&&(b=e.document.cookie.indexOf(a+"\x3d"),-1<b)?(b=b+a.length+
1,a=e.document.cookie.indexOf(";",b),-1===a&&(a=e.document.cookie.length),decodeURIComponent(e.document.cookie.substring(b,a))):""}}]);return a}(),F=function(){function a(b,c,d,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cookieHelper=new G;this.platformDetector=new D;this.siteName=b;this.serviceName=c;this.methodName=d;var l=e.location.hostname;a.AMAZON_DOMAIN_HELPER=new x;var g=a.getDataSet(l);l=a.AMAZON_DOMAIN_HELPER.getMarketplaceRealm(l);b=(new v._y.Builder).withSite(b).withServiceName(c);
f&&(b.withActionId(f),this.actionId=f);(f=this.cookieHelper.getCookieValue("session-id"))&&b.withRelatedMetrics(new v.jb.String("session-id",f));f=b.build();b=b.withRelatedMetrics().build();c=function(a){console.error("Unable to publish metrics",a)};g=(new L.Z.Builder).withDomainRealm(g,l).withErrorHandler(c).withSushiClientOptions({hiPriFlushInterval:8,lowPriFlushInterval:13}).build();this.childMetricsPublisher=(new v.FW(g,c,f)).newChildActionPublisherForMethod(d,b)}l(a,[{key:"attachDimensions",
value:function(a,b){var c={};b&&"undefined"!==typeof b.os&&(c.os=b.os);b&&"undefined"!==typeof b.browser&&(c.browser=b.browser);b&&"undefined"!==typeof b.consentui&&(c.consentui=b.consentui);b&&"undefined"!==typeof b.pb&&(c.pb=b.pb);a="".concat(a);for(var d in c)a="".concat(a,":").concat(d,"@").concat(c[d]);return a}},{key:"sanitizeMetricsKey",value:function(a){return a.replace(":","_")}},{key:"publishCounter",value:function(a,b){var c=2<arguments.length&&arguments[2]!==p?arguments[2]:{metricsDimension:{os:this.platformDetector.getOSName(),
browser:this.platformDetector.getBrowserName()}},d=this.sanitizeMetricsKey(a);d=this.attachDimensions(d,c.metricsDimension);this.childMetricsPublisher.publishCounterMonitor(d,b)}},{key:"publishString",value:function(a,b){this.childMetricsPublisher.publishString(a,b)}},{key:"publishStringTruncate",value:function(a,b){this.childMetricsPublisher.publishStringTruncate(a,b)}},{key:"publishCounterOnce",value:function(a){this.publishCounter(a,1,1<arguments.length&&arguments[1]!==p?arguments[1]:{})}},{key:"publishTimer",
value:function(a,b){var c=2<arguments.length&&arguments[2]!==p?arguments[2]:{metricsDimension:{os:this.platformDetector.getOSName(),browser:this.platformDetector.getBrowserName()}},d=this.sanitizeMetricsKey(a);d=this.attachDimensions(d,c.metricsDimension);this.childMetricsPublisher.publishTimerMonitor(d,b)}},{key:"getActionId",value:function(){return this.actionId}},{key:"getSiteName",value:function(){return this.siteName}},{key:"getServiceName",value:function(){return this.serviceName}},{key:"getMethodName",
value:function(){return this.methodName}}],[{key:"getDataSet",value:function(b){return a.AMAZON_DOMAIN_HELPER.isAmazonProdDomain(b)?"prod":"test"}}]);return a}();(function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a})(F,"AMAZON_DOMAIN_HELPER",new x);var H=C(9846);e.P&&d("IdentityCommon",w)})()})();"use strict";var G=function(){function e(e,p){for(var a=0;a<p.length;a++){var c=p[a];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in
c&&(c.writable=!0);Object.defineProperty(e,c.key,c)}}return function(p,u,a){u&&e(p.prototype,u);a&&e(p,a);return p}}(),F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};A.when("web_authn_helper","IdentityCommon","mobile-auth-platform-mock-checker","ready").register("mobile-auth-platform",function(p,z){function u(a,b){var c={};c.error=a;c.errorMessage=
b;return c}function a(a){var b="IdentityService."+e.location.pathname.replace(/\//g,"_");"undefined"===typeof h[a]&&(h[a]=z.getMetricsPublisher(b,"MAPWebAssets",a));h[a].publishCounter("Counter",1)}function c(a,c,l,y){var d=Date.now();a.invocationTime=d;a.callbackFunctionNameKey="mapJSCallback";a.callingId=c+d+b;b+=1;g[a.callingId]=l;k[a.callingId]=c;0<y&&(y="number"!==typeof y?100:y,a.timeout=y,a.timerId=e.setTimeout(function(){e.mapJSCallback(a,u("Timeout_Error"));h[c].publishCounter("Timeout",
1)},y))}var b=0,g={},k={},h={};e.mapJSCallback=function(a,b){var c=a.callingId,f=a.timerId;if("undefined"===typeof c)console.log("callingId is not defined. No op");else if("function"===typeof g[c]){var d=g[c];delete g[c];"number"===typeof f&&(console.log("Timer id is valid, clear the timeout"),e.clearTimeout(f));if("undefined"!==typeof b.attestationObject){try{b.publicKey=p.extractECPublicKeyFromAttestationObjectAndTransformToASN1Encoding(b.attestationObject)}catch(L){console.log("Error occurred while extracting public key from attestationObject")}delete b.attestationObject}"getAssertionWithAuthenticatorCredential"===
k[c]&&"undefined"!==typeof b.credentialId&&delete b.credentialId;f=Date.now()-a.invocationTime;var m=h[k[c]];m.publishTimer("Time",f);var n="object"!==("undefined"===typeof b?"undefined":F(b))?!0===b:"undefined"===typeof b.error;n?m.publishCounter("Success",1):m.publishCounter("Error",1);a="undefined"!==typeof a.timeout&&"getAssertionWithAuthenticatorCredential"===k[c]&&f>=a.timeout?!0:!1;a?d(u("Timeout_Error")):d(b)}else console.log(c+" is not valid calling Id. The callback should not be processed at this page. ")};
e.injectTokenCallback=function(a,b){var c=document.getElementById(b.callingId);b=b.originalFunction;a.token=c.innerText;if("undefined"!==typeof e.FidoAuthenticatorJSBridge&&"function"===typeof e.FidoAuthenticatorJSBridge[b])e.FidoAuthenticatorJSBridge[b](JSON.stringify(a));else if("undefined"!==typeof e.APPToBrowserSSOJSBridge&&"function"===typeof e.APPToBrowserSSOJSBridge[b])e.APPToBrowserSSOJSBridge[b](JSON.stringify(a));else if("undefined"!==typeof e.MAPAndroidJSBridge&&"function"===typeof e.MAPAndroidJSBridge[b])e.MAPAndroidJSBridge[b](JSON.stringify(a));
c.parentNode.removeChild(c)};var t=function(){function a(){D(this,a)}G(a,[{key:"upgradeToken",value:function(a){console.log("upgradeToken on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"switchActor",value:function(a){console.log("switchActor on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"getCustomerInformationHint",value:function(a){console.log("getCustomerInformationHint on unsupported version or platform. return error message.");
e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"getVersion",value:function(a){console.log("getVersion on unsupported version or platform, return default value");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"isSmsRetrieverEnabled",value:function(a){console.log("isSmsRetrieverEnabled on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"registerMAPSmsReceiver",value:function(a){console.log("registerMAPSmsReceiver on unsupported version or platform. return error message.");
e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"isJSBridgeAvailable",value:function(){return!1}},{key:"isUserVerifyingPlatformAuthenticatorAvailable",value:function(a){console.log("isUserVerifyingPlatformAuthenticatorAvailable on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"createAuthenticatorCredential",value:function(a){console.log("createAuthenticatorCredential on unsupported version or platform. return error message.");e.mapJSCallback(a,
u("Unsupported_Platform"))}},{key:"getAssertionWithAuthenticatorCredential",value:function(a){console.log("getAssertionWithAuthenticatorCredential on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"isAuthenticatorCredentialAvailable",value:function(a){console.log("isAuthenticatorCredentialAvailable on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"getCurrentAppInfo",value:function(a){console.log("getCurrentAppInfo on unsupported version or platform. return error message.");
e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"dismissSpinnerView",value:function(a){console.log("dismissSpinnerView on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"getAccounts",value:function(a){console.log("getAccounts on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"getAuthCode",value:function(a){console.log("getAuthCode on unsupported version or platform. return error message.");
e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"openUrlInBrowser",value:function(a){console.log("openUrlInBrowser on unsupported version or platform. return error message.");e.mapJSCallback(a,u("Unsupported_Platform"))}}],[{key:"getImp",value:function(){try{if(n.isAndroidSupported())return new n;if(q.isIOSSupported())return new q}catch(f){console.log("Creation of MAP JS Bridge failed: "+f)}return new a}}]);return a}(),n=function(a){function b(){D(this,b);return B(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}K(b,a);G(b,[{key:"run",value:function(a,b){"undefined"!==typeof e.MAPAndroidJSBridge&&"function"===typeof e.MAPAndroidJSBridge[a]?(console.log(a+" is called on MAP Android's MAPAndroidJSBridge"),e.MAPAndroidJSBridge[a](JSON.stringify(b))):"undefined"!==typeof e.FidoAuthenticatorJSBridge&&"function"===typeof e.FidoAuthenticatorJSBridge[a]?(console.log(a+" is called on MAP Android's FidoAuthenticatorJSBridge"),e.FidoAuthenticatorJSBridge[a](JSON.stringify(b))):"undefined"!=typeof e.APPToBrowserSSOJSBridge&&
"function"===typeof e.APPToBrowserSSOJSBridge[a]?(console.log(a+" is called on MAP Android's APPToBrowserSSOJSBridge"),e.APPToBrowserSSOJSBridge[a](JSON.stringify(b))):(console.log(a+" is not supported on this MAP Android version."),e.mapJSCallback(b,u("Unsupported_MAP_Version")))}},{key:"upgradeToken",value:function(a){this.run("upgradeToken",a)}},{key:"switchActor",value:function(a){this.run("switchActor",a)}},{key:"getCustomerInformationHint",value:function(a){this.run("getCustomerInformationHint",
a)}},{key:"getVersion",value:function(a){this.run("getMAPAndroidBridgeVersion",a)}},{key:"isSmsRetrieverEnabled",value:function(a){this.run("isSmsRetrieverEnabled",a)}},{key:"registerMAPSmsReceiver",value:function(a){this.run("registerMAPSmsReceiver",a)}},{key:"isJSBridgeAvailable",value:function(){return b.isAndroidSupported()}},{key:"isUserVerifyingPlatformAuthenticatorAvailable",value:function(a){this.run("isUserVerifyingPlatformAuthenticatorAvailable",a)}},{key:"createAuthenticatorCredential",
value:function(a){this.run("createAuthenticatorCredential",a)}},{key:"getAssertionWithAuthenticatorCredential",value:function(a){this.run("getAssertionWithAuthenticatorCredential",a)}},{key:"isAuthenticatorCredentialAvailable",value:function(a){this.run("isAuthenticatorCredentialAvailable",a)}},{key:"getCurrentAppInfo",value:function(a){console.log("Calling getCurrentAppInfo in Android");this.run("getCurrentAppInfo",a)}},{key:"dismissSpinnerView",value:function(a){console.log("dismissSpinnerView on unsupported version or platform. return error message.");
e.mapJSCallback(a,u("Unsupported_Platform"))}},{key:"getAccounts",value:function(a){this.run("getAccounts",a)}},{key:"getAuthCode",value:function(a){this.run("getAuthCode",a)}},{key:"openUrlInBrowser",value:function(a){if("undefined"!==typeof a.browserName){var b={chrome:{packageName:"com.android.chrome",signatureFingerprintList:["f0fd6c5b410f25cb25c3b53346c8972fae30f8ee7411df910480ad6b2d60db83"]}},c=a.browserName;c in b?(a.browserName=b[c].packageName,a.browserSignatureFingerprintList=b[c].signatureFingerprintList):
delete a.browserName}this.run("openUrlInBrowser",a)}}],[{key:"isAndroidSupported",value:function(){return"undefined"!==typeof e.MAPAndroidJSBridge&&"undefined"!==typeof e.MAPAndroidJSBridge.getMAPAndroidBridgeVersion||"undefined"!==typeof e.FidoAuthenticatorJSBridge&&"undefined"!==typeof e.FidoAuthenticatorJSBridge.getCurrentAppInfo||"undefined"!==typeof e.APPToBrowserSSOJSBridge?!0:!1}}]);return b}(t),q=function(a){function b(){D(this,b);return B(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}K(b,a);G(b,[{key:"run",value:function(a,b){e.webkit.messageHandlers[a]&&"function"===typeof e.webkit.messageHandlers[a].postMessage?(console.log(a+" is called on MAP iOS."),e.webkit.messageHandlers[a].postMessage(b)):(console.log(a+" is not supported on this MAP iOS version."),e.mapJSCallback(b,u("Unsupported_MAP_Version")))}},{key:"upgradeToken",value:function(a){this.run("upgradeToken",a)}},{key:"getVersion",value:function(a){this.run("getMAPiOSBridgeVersion",a)}},{key:"isJSBridgeAvailable",
value:function(){return b.isIOSSupported()}},{key:"isUserVerifyingPlatformAuthenticatorAvailable",value:function(a){this.run("isUserVerifyingPlatformAuthenticatorAvailable",a)}},{key:"createAuthenticatorCredential",value:function(a){this.run("createAuthenticatorCredential",a)}},{key:"getAssertionWithAuthenticatorCredential",value:function(a){this.run("getAssertionWithAuthenticatorCredential",a)}},{key:"isAuthenticatorCredentialAvailable",value:function(a){this.run("isAuthenticatorCredentialAvailable",
a)}},{key:"getCurrentAppInfo",value:function(a){this.run("getCurrentAppInfo",a)}},{key:"dismissSpinnerView",value:function(a){this.run("dismissSpinnerView",a)}},{key:"getAccounts",value:function(a){this.run("getAccounts",a)}},{key:"getAuthCode",value:function(a){this.run("getAuthCode",a)}},{key:"openUrlInBrowser",value:function(a){delete a.browserName;this.run("openUrlInBrowser",a)}}],[{key:"isIOSSupported",value:function(){return e.webkit&&e.webkit.messageHandlers&&(e.webkit.messageHandlers.getMAPiOSBridgeVersion||
e.webkit.messageHandlers.getCurrentAppInfo)?!0:!1}}]);return b}(t),r=t.getImp();return{CONSTANT:{CustomerInformationHintType:{NAME:"NAME",EMAIL:"EMAIL",PHONE:"PHONE"}},upgradeDeviceTokens:function(b,f,e,g,d){var h={};h.authCode=b;h.cid=f;h.pid=e;a("upgradeDeviceTokens");c(h,"upgradeDeviceTokens",g,d);r.upgradeToken(h)},switchActor:function(b,f,e,g,d,h,k){var m={};m.cid=b;m.pid=f;m.program=e;m.actor_type=g;m.actor_switch_mode=d;a("switchActor");c(m,"switchActor",h,k);r.switchActor(m)},getCustomerInformationHint:function(b,
f){b={hintTypes:b};a("getCustomerInformationHint");c(b,"getCustomerInformationHint",f,-1);r.getCustomerInformationHint(b)},isJSBridgeAvailable:function(){a("isJSBridgeAvailable");return r.isJSBridgeAvailable()},mapJSVersion:function(b,f){var e={};a("getVersion");c(e,"getVersion",b,f);r.getVersion(e)},isSmsRetrieverEnabled:function(b,e){var f={};a("isSmsRetrieverEnabled");c(f,"isSmsRetrieverEnabled",b,e);r.isSmsRetrieverEnabled(f)},registerMAPSmsReceiver:function(b){var e={};a("registerMAPSmsReceiver");
c(e,"registerMAPSmsReceiver",b,-1);r.registerMAPSmsReceiver(e)},isUserVerifyingPlatformAuthenticatorAvailable:function(b,e){var f={};a("isUserVerifyingPlatformAuthenticatorAvailable");c(f,"isUserVerifyingPlatformAuthenticatorAvailable",b,e);r.isUserVerifyingPlatformAuthenticatorAvailable(f)},isAuthenticatorCredentialAvailable:function(b,e,g){var f={};f.credentialId=b;a("isAuthenticatorCredentialAvailable");c(f,"isAuthenticatorCredentialAvailable",e,g);r.isAuthenticatorCredentialAvailable(f)},createAuthenticatorCredential:function(b,
e){a("createAuthenticatorCredential");c(b,"createAuthenticatorCredential",e,-1);r.createAuthenticatorCredential(b)},getAssertionWithAuthenticatorCredential:function(b,e){a("getAssertionWithAuthenticatorCredential");c(b,"getAssertionWithAuthenticatorCredential",e,-1);r.getAssertionWithAuthenticatorCredential(b)},getCurrentAppInfo:function(b,e){var f={};a("getCurrentAppInfo");c(f,"getCurrentAppInfo",b,e);r.getCurrentAppInfo(f)},dismissSpinnerView:function(b){var e={};a("dismissSpinnerView");c(e,"dismissSpinnerView",
b,0);r.dismissSpinnerView(e)},getAccounts:function(b,e){var f={};a("getAccounts");c(f,"getAccounts",function(a){!a||a.error?console.log("Cannot get accounts info"):0===a.length&&h.getAccounts.publishCounter("NoAccount",1);b(a)},e);r.getAccounts(f)},getAuthCode:function(b,e,g,h){var d={};d.directedId=b;d.authChallenge=e;a("getAuthCode");c(d,"getAuthCode",g,h);r.getAuthCode(d)},openUrlInBrowser:function(b,f,g,h){var d={};"string"===typeof g&&(d.browserName=g);"boolean"===typeof h&&(d.shouldCloseCurrentUI=
h);a("openUrlInBrowser");c(d,"openUrlInBrowser",f,0);h&&e.dispatchEvent(new Event("beforeunload"));(f=z.getAmazonDomainHelper().encodeUrl(b))&&/https:\/\/[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+/.test(b)?(d.url=f,e.setTimeout(function(){r.openUrlInBrowser(d)},17)):e.mapJSCallback(d,u("Invalid_Input",b+" is not a valid url"))}}});"use strict";A.execute("mobile-auth-platform-mock-support",function(){(function(e){return document.cookie.split(";").some(function(p){return 0===p.trim().indexOf(e+
"\x3d")})})("mobile-auth-platform-mock-support")?function(){(function z(){e.MAPAndroidJSBridge?A.register("mobile-auth-platform-mock-checker",function(){return{}}):e.webkit&&e.webkit.messageHandlers?A.register("mobile-auth-platform-mock-checker",function(){return{}}):setTimeout(z,200)})()}():A.register("mobile-auth-platform-mock-checker",function(){return{}})});"use strict";F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===
typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};A.register("cbor",function(){var e=Math.pow(2,-24),z=Math.pow(2,32),u=Math.pow(2,53);return{encode:function(a){function c(a){for(var b=n.byteLength,c=m+a;b<c;)b*=2;if(b!==n.byteLength){c=q;n=new ArrayBuffer(b);q=new DataView(n);b=m+3>>2;for(var e=0;e<b;++e)q.setUint32(4*e,c.getUint32(4*e))}r=a;return q}function b(){m+=r}function e(a){b(c(1).setUint8(m,a))}function k(a){for(var d=c(a.length),e=0;e<a.length;++e)d.setUint8(m+
e,a[e]);b()}function h(a,d){if(24>d)e(a<<5|d);else if(256>d)e(a<<5|24),e(d);else if(65536>d)e(a<<5|25),b(c(2).setUint16(m,d));else if(4294967296>d)e(a<<5|26),b(c(4).setUint32(m,d));else{e(a<<5|27);a=d%z;d=(d-a)/z;var f=c(8);f.setUint32(m,d);f.setUint32(m+4,a);b()}}function t(a){var d;if(!1===a)return e(244);if(!0===a)return e(245);if(null===a)return e(246);if(a===p)return e(247);switch("undefined"===typeof a?"undefined":F(a)){case "number":if(Math.floor(a)===a){if(0<=a&&a<=u)return h(0,a);if(-u<=
a&&0>a)return h(1,-(a+1))}e(251);b(c(8).setFloat64(m,a));break;case "string":var f=[];for(d=0;d<a.length;++d){var g=a.charCodeAt(d);128>g?f.push(g):(2048>g?f.push(192|g>>6):(55296>g?f.push(224|g>>12):(g=(g&1023)<<10,g|=a.charCodeAt(++d)&1023,g+=65536,f.push(240|g>>18),f.push(128|g>>12&63)),f.push(128|g>>6&63)),f.push(128|g&63))}h(3,f.length);return k(f);default:if(Array.isArray(a))for(f=a.length,h(4,f),d=0;d<f;++d)t(a[d]);else if(a instanceof Uint8Array)h(2,a.length),k(a);else if(a instanceof ArrayBuffer)a=
new Uint8Array(a),h(2,a.length),k(a);else for(g=Object.keys(a),f=g.length,h(5,f),d=0;d<f;++d){var l=g[d];t(l);t(a[l])}}}var n=new ArrayBuffer(256),q=new DataView(n),r,m=0;t(a);if("slice"in n)return n.slice(0,m);a=new ArrayBuffer(m);for(var f=new DataView(a),l=0;l<m;++l)f.setUint8(l,q.getUint8(l));return a},decode:function(a,c,b){function g(a,b){l+=b;return a}function k(b){return g(new Uint8Array(a,l,b),b)}function h(){return g(f.getUint8(l),1)}function u(){if(255!==f.getUint8(l))return!1;l+=1;return!0}
function n(a){if(24>a)return a;if(24===a)return h();if(25===a)return g(f.getUint16(l),2);if(26===a)return g(f.getUint32(l),4);if(27===a)return g(f.getUint32(l),4)*z+g(f.getUint32(l),4);if(31===a)return-1;throw"Invalid length encoding";}function q(a){var b=h();if(255===b)return-1;var c=n(b&31);if(0>c||b>>5!==a)throw"Invalid indefinite length element";return c}function r(a,b){for(var c=0;c<b;++c){var d=h();d&128&&(224>d?(d=(d&31)<<6|h()&63,--b):240>d?(d=(d&15)<<12|(h()&63)<<6|h()&63,b-=2):(d=(d&15)<<
18|(h()&63)<<12|(h()&63)<<6|h()&63,b-=3));65536>d?a.push(d):(d-=65536,a.push(55296|d>>10),a.push(56320|d&1023))}}function m(){var a=h(),w=a>>5;a&=31;if(7===w)switch(a){case 25:a:{a=new ArrayBuffer(4);a=new DataView(a);w=g(f.getUint16(l),2);var v=w&31744,t=w&1023;if(31744===v)v=261120;else if(0!==v)v+=114688;else if(0!==t){a=t*e;break a}a.setUint32(0,(w&32768)<<16|v<<13|t<<13);a=a.getFloat32(0)}return a;case 26:return g(f.getFloat32(l),4);case 27:return g(f.getFloat64(l),8)}a=n(a);if(0>a&&(2>w||6<
w))throw"Invalid length";switch(w){case 0:return a;case 1:return-1-a;case 2:if(0>a){v=[];for(t=0;0<=(a=q(w));)t+=a,v.push(k(a));a=new Uint8Array(t);for(w=t=0;w<v.length;++w)a.set(v[w],t),t+=v[w].length;return a}return k(a);case 3:v=[];if(0>a)for(;0<=(a=q(w));)r(v,a);else r(v,a);return String.fromCharCode.apply(null,v);case 4:if(0>a)for(v=[];!u();)v.push(m());else for(v=Array(a),w=0;w<a;++w)v[w]=m();return v;case 5:v={};for(w=0;w<a||0>a&&!u();++w)t=m(),v[t]=m();return v;case 6:return c(m(),a);case 7:switch(a){case 20:return!1;
case 21:return!0;case 22:return null;case 23:return p;default:return b(a)}}}var f=new DataView(a),l=0;"function"!==typeof c&&(c=function(a){return a});"function"!==typeof b&&(b=function(){return p});var y=m();if(l!==a.byteLength)throw"Remaining bytes";return y}}});"use strict";A.when("cbor").register("web_authn_helper",function(p){function z(a){a=a.replace(/\s/g,"").replace(/-/g,"+").replace(/_/g,"/");a=e.atob(a);for(var b=a.length,c=new Uint8Array(b),k=0;k<b;k++)c[k]=a.charCodeAt(k);return c.buffer}
function u(a){for(var b="",c=a.length,k=0;k<c;k++)b+=String.fromCharCode(a[k]);return e.btoa(b)}function a(a){var b=a.byteLength;return Object.keys(a).map(function(b){return[a[b]]}).slice(0,b)}return{extractECPublicKeyFromAttestationObjectAndTransformToASN1Encoding:function(c){c=z(c);c=p.decode(c).authData;c=a(c);var b=new DataView(new ArrayBuffer(2));c.slice(53,55).forEach(function(a,c){return b.setUint8(c,a)});var e=b.getUint16(0);c.slice(55,55+e);c=c.slice(55+e);c=(new Uint8Array(c)).buffer;e=
p.decode(c);c=a(e[-2]);e=a(e[-3]);c=[4].concat(c).concat(e);return u(c)}}})});